<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"  
	xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui"
	xmlns:h="http://java.sun.com/jsf/html">

<ui:composition template="/views/template/makaan-template.xhtml">
	<ui:define name="customStylesheet">
		<link href="/resources/makaan/css/user-post.css" rel="stylesheet" type="text/css" />
	</ui:define>
	<ui:define name="customOutputScript">
		<script src="resources/makaan/js/post-card.js"/>
		<script src="https://maps.google.com/maps/api/js?sensor=false"/>
	</ui:define>

	<ui:define name="property-content">

		<o:importConstants type="org.RealEstate.enumerator.PostType" />
		<div class="container-xxl py-5">
			<div class="container">
				<div class="tab-content">
					<p:tabView id="tabView" style="border:1px solid #ddd !important"
						activeIndex="#{userPostCardController.activeIndex}"
						binding="#{userPostCardController.tabView}">
						<p:ajax event="tabChange"
							listener="#{userPostCardController.onTabChange}" />

						<p:tab id="realestate" title="#{bundle.real_estates}" rendered="#{!userPostCardController.hideRealEsateTab()}"> 
							<ui:include
								src="/views/makaan/userpost-snippet/post-realestate-snippet.xhtml" />
						</p:tab>

						<p:tab id="chalet" title="#{bundle.chalets}" rendered="#{!userPostCardController.hideChaletTab()}">
							<ui:include
								src="/views/makaan/userpost-snippet/post-chalet-snippet.xhtml" />
						</p:tab>
					</p:tabView>
					<div class="row">
						<div class="col-md-12">
							<p:gmap id="gmap" center="33.8938,35.5018" zoom="13"
								type="HYBRID" style="width:100%;height:400px"
								model="#{userPostCardController.mapModel}"
								onPointClick="handlePointClick(event);" widgetVar="map">
							</p:gmap>
						</div>
					</div>
				</div>
			</div>
			<h:panelGroup id="panelCoordinates">
				<h:inputHidden id="lat" value="#{userPostCardController.lat}" />
				<h:inputHidden id="lng" value="#{userPostCardController.lng}" />
				<h:inputHidden id="title" value="#{userPostCardController.title}" />
				<p:commandButton id="markerBtn"
					action="#{userPostCardController.addMarker()}"
					style="display:none;" update=":messageScript myForm:gmap"
					process="myForm:panelCoordinates" />
			</h:panelGroup>
		</div>
	</ui:define>
</ui:composition>
</html>
